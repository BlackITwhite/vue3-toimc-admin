import{Y as X,q as Z,bm as c,e as _,N as x,n as ee,bf as ne,ax as te,bn as ae,bo as ue,f as re,g as le,a9 as se,bp as ie,x as oe,y as v,ae as h,aE as de,b8 as ce,H as me,an as be,bq as pe,z as fe,aF as K,r as b,aM as Ne,o as d,c as D,aN as T,A as E,aO as w,b as C,w as U,h as I,C as O,a7 as P,a2 as ve}from"./index.a99f17d5.js";import{R as he}from"./index2.893cc8a6.js";const Ve=X({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:Z},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),ge={change:(e,u)=>e!==u,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>c(e),"update:modelValue":e=>c(e)||e===void 0},we=_({name:"ElInputNumber",components:{ElInput:x,ElIcon:ee,ArrowUp:ne,ArrowDown:te,Plus:ae,Minus:ue},directives:{RepeatClick:he},props:Ve,emits:ge,setup(e,{emit:u}){const m=re(),l=le({currentValue:e.modelValue,userInput:null}),{t:z}=se(),{formItem:i}=ie(),y=oe("input-number"),V=v(()=>g(e.modelValue,-1)<e.min),p=v(()=>g(e.modelValue)>e.max),S=v(()=>{const n=M(e.step);return h(e.precision)?Math.max(M(e.modelValue),n):(n>e.precision,e.precision)}),A=v(()=>e.controls&&e.controlsPosition==="right"),F=de(),o=ce(),f=v(()=>{if(l.userInput!==null)return l.userInput;let n=l.currentValue;if(c(n)){if(Number.isNaN(n))return"";h(e.precision)||(n=n.toFixed(e.precision))}return n}),B=(n,t)=>{h(t)&&(t=S.value);const a=n.toString().split(".");if(a.length>1){const r=a[0],N=Math.round(+a[1]/10**(a[1].length-t));return Number.parseFloat(`${r}.${N}`)}return Number.parseFloat(`${Math.round(n*10**t)/10**t}`)},M=n=>{if(h(n))return 0;const t=n.toString(),a=t.indexOf(".");let r=0;return a!==-1&&(r=t.length-a-1),r},g=(n,t=1)=>c(n)?(n=c(n)?n:Number.NaN,B(n+e.step*t)):l.currentValue,Y=()=>{if(o.value||p.value)return;const n=e.modelValue||0,t=g(n);k(t)},q=()=>{if(o.value||V.value)return;const n=e.modelValue||0,t=g(n,-1);k(t)},$=(n,t)=>{const{max:a,min:r,step:N,precision:R,stepStrictly:Q}=e;let s=Number(n);return n===null&&(s=Number.NaN),Number.isNaN(s)||(Q&&(s=Math.round(s/N)*N),h(R)||(s=B(s,R)),(s>a||s<r)&&(s=s>a?a:r,t&&u("update:modelValue",s))),s},k=n=>{var t;const a=l.currentValue;let r=$(n);a!==r&&(Number.isNaN(r)&&(r=void 0),l.userInput=null,u("update:modelValue",r),u("input",r),u("change",r,a),(t=i==null?void 0:i.validate)==null||t.call(i,"change").catch(N=>K()),l.currentValue=r)},G=n=>l.userInput=n,H=n=>{const t=n!==""?Number(n):"";(c(t)&&!Number.isNaN(t)||n==="")&&k(t),l.userInput=null},L=()=>{var n,t;(t=(n=m.value)==null?void 0:n.focus)==null||t.call(n)},W=()=>{var n,t;(t=(n=m.value)==null?void 0:n.blur)==null||t.call(n)},j=n=>{u("focus",n)},J=n=>{var t;u("blur",n),(t=i==null?void 0:i.validate)==null||t.call(i,"blur").catch(a=>K())};return me(()=>e.modelValue,n=>{const t=$(n,!0);l.currentValue=t,l.userInput=null},{immediate:!0}),be(()=>{var n;const t=(n=m.value)==null?void 0:n.input;if(t.setAttribute("role","spinbutton"),Number.isFinite(e.max)?t.setAttribute("aria-valuemax",String(e.max)):t.removeAttribute("aria-valuemax"),Number.isFinite(e.min)?t.setAttribute("aria-valuemin",String(e.min)):t.removeAttribute("aria-valuemin"),t.setAttribute("aria-valuenow",String(l.currentValue)),t.setAttribute("aria-disabled",String(o.value)),!c(e.modelValue)){let a=Number(e.modelValue);Number.isNaN(a)&&(a=void 0),u("update:modelValue",a)}}),pe(()=>{var n;const t=(n=m.value)==null?void 0:n.input;t==null||t.setAttribute("aria-valuenow",l.currentValue)}),{t:z,input:m,displayValue:f,handleInput:G,handleInputChange:H,controlsAtRight:A,decrease:q,increase:Y,inputNumberSize:F,inputNumberDisabled:o,maxDisabled:p,minDisabled:V,focus:L,blur:W,handleFocus:j,handleBlur:J,ns:y}}}),Ie=["aria-label"],ye=["aria-label"];function Se(e,u,m,l,z,i){const y=b("arrow-down"),V=b("minus"),p=b("el-icon"),S=b("arrow-up"),A=b("plus"),F=b("el-input"),o=Ne("repeat-click");return d(),D("div",{class:E([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:u[2]||(u[2]=P(()=>{},["prevent"]))},[e.controls?T((d(),D("span",{key:0,role:"button","aria-label":e.t("el.inputNumber.decrease"),class:E([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:u[0]||(u[0]=w((...f)=>e.decrease&&e.decrease(...f),["enter"]))},[C(p,null,{default:U(()=>[e.controlsAtRight?(d(),I(y,{key:0})):(d(),I(V,{key:1}))]),_:1})],42,Ie)),[[o,e.decrease]]):O("v-if",!0),e.controls?T((d(),D("span",{key:1,role:"button","aria-label":e.t("el.inputNumber.increase"),class:E([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:u[1]||(u[1]=w((...f)=>e.increase&&e.increase(...f),["enter"]))},[C(p,null,{default:U(()=>[e.controlsAtRight?(d(),I(S,{key:0})):(d(),I(A,{key:1}))]),_:1})],42,ye)),[[o,e.increase]]):O("v-if",!0),C(F,{id:e.id,ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[w(P(e.increase,["prevent"]),["up"]),w(P(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var Ae=fe(we,[["render",Se],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const De=ve(Ae);export{De as E};
