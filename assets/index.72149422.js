var K=Object.defineProperty,R=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var E=(t,e,a)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,w=(t,e)=>{for(var a in e||(e={}))N.call(e,a)&&E(t,a,e[a]);if(k)for(var a of k(e))P.call(e,a)&&E(t,a,e[a]);return t},L=(t,e)=>R(t,T(e));import{f as B,g as U,co as V,aG as I,e as S,E as j,o as W,c as $,a as r,F as z,D as G,t as D,aZ as l,b as q,w as g,i as c}from"./index.fbf2fccb.js";import{a as A}from"./index.cf99b79d.js";const Q=A.create({baseURL:"/api",timeout:30*1e3});function Z(t){const e=B();return{instance:Q(L(w({},t),{cancelToken:new A.CancelToken(a=>{e.value=a})})),cancel:e}}function H(){const t=U({}),e=n=>n?(t[n]||(t[n]={}),!0):!1;return{queries:t,queriesBefore:n=>{!e(n)||(t[n].loading=!0)},setCancel:(n,d)=>{!e(n)||!d||(t[n].cancel=d)},queriesAfter:(n,d)=>{!e(n)||(t[n].data=d.data.data)},queriesFinally:n=>{!e(n)||(t[n].loading=!1)}}}function p(t,e={}){const{manual:a=!1,defaultParams:f=[]}=e,_=B(!1),h=B(),n=B(),{queries:d,queriesBefore:x,queriesAfter:F,queriesFinally:y,setCancel:m}=H(),i=async(...s)=>{let u="";e.queryKey&&(u=e.queryKey(...s)),x(u),_.value=!0;const{instance:C,cancel:b}=t(...s);m(u,b.value),n.value=b.value,C.then(v=>{h.value=v.data.data,F(u,v)}).finally(()=>{_.value=!1,y(u)})};let o=i;return e.throttleWait&&(o=V(i,e.throttleWait)),e.debounceWait&&(o=I(i,e.debounceWait,{leading:e.debounceLeading||!0,trailing:e.debounceTrailing||!1})),a||o(...f),{run:o,loading:_,queries:d,cancel:n}}const J=r("div",{class:"text-red-500"}," queryKey\u793A\u4F8B ",-1),M={class:"p-[24px]"},O={class:"flex justify-between"},X=c("\u8BF7\u6C42"),Y=c("\u53D6\u6D88"),ee={class:"text-red-500"},te=c(" debounce: \u53D6\u6D88\u4E86\u4E5F\u4F1A\u9632\u6296 "),ne=c("\u8BF7\u6C42"),ae=c("\u53D6\u6D88"),ue={class:"text-red-500"},se=c(" throttle "),ie=c("\u8BF7\u6C42"),oe=c("\u53D6\u6D88"),de=S({setup(t){function e(m){return Z({url:"/getUserInfo",method:"get",params:{id:m}})}const{run:a,queries:f}=p(e,{manual:!0,queryKey:m=>String(m)}),{run:_,loading:h,cancel:n}=p(e,{manual:!0,debounceWait:1500,defaultParams:[1e4]}),{run:d,loading:x,cancel:F}=p(e,{manual:!0,throttleWait:1500,defaultParams:[1e4]}),y=[{id:1e4,username:"\u5F20\u4E09",email:"zhangsan@qq.com",phone:1311111111},{id:10001,username:"\u674E\u56DB",email:"lisi@qq.com",phone:1311111111},{id:10002,username:"\u738B\u4E94",email:"wangwu@qq.com",phone:1311111111}];return(m,i)=>{const o=j;return W(),$("div",null,[J,r("ul",M,[(W(),$(z,null,G(y,s=>{var u,C;return r("li",{key:s.id},[r("div",O,[r("div",null,D(s.username),1),c(" "+D((u=l(f)[s.id])==null?void 0:u.data)+" ",1),r("div",null,[q(o,{loading:(C=l(f)[s.id])==null?void 0:C.loading,onClick:b=>l(a)(s.id)},{default:g(()=>[X]),_:2},1032,["loading","onClick"]),q(o,{onClick:b=>{var v;return(v=l(f)[s.id])==null?void 0:v.cancel()}},{default:g(()=>[Y]),_:2},1032,["onClick"])])])])}),64))]),r("div",null," queries: "+D(l(f)),1),r("div",ee,[te,q(o,{loading:l(h),onClick:i[0]||(i[0]=s=>l(_)(1))},{default:g(()=>[ne]),_:1},8,["loading"]),q(o,{onClick:i[1]||(i[1]=s=>{var u;return(u=l(n))==null?void 0:u()})},{default:g(()=>[ae]),_:1})]),r("div",ue,[se,q(o,{onClick:i[2]||(i[2]=s=>l(d)(1))},{default:g(()=>[ie]),_:1}),q(o,{onClick:i[3]||(i[3]=s=>{var u;return(u=l(F))==null?void 0:u()})},{default:g(()=>[oe]),_:1})])])}}});export{de as default};
