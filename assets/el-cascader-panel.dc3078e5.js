var Nn=Object.defineProperty,$n=Object.defineProperties;var wn=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var Tn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable;var qe=(e,n,a)=>n in e?Nn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,se=(e,n)=>{for(var a in n||(n={}))Tn.call(n,a)&&qe(e,a,n[a]);if(Re)for(var a of Re(n))Vn.call(n,a)&&qe(e,a,n[a]);return e},ve=(e,n)=>$n(e,wn(n));import{e as re,v as te,a3 as Se,m as Te,a4 as Xe,a5 as Qe,a6 as Ye,a0 as ke,x as g,y as fe,r as w,o as k,c as H,B as U,g as R,a7 as ge,w as P,b as B,z as N,F as oe,a as Y,a8 as _e,a9 as Ve,f as I,aa as Pn,C as ue,h as xe,t as Z,ab as en,ac as Le,ad as Ue,ae as Dn,af as je,ag as me,ah as Sn,ai as Ln,aj as ce,ak as he,al as Mn,X as He,G as J,am as In,an as nn,ao as Hn,ap as ie,aq as an,ar as An,as as K,at as be,au as tn,M as ln,av as Bn,aw as Fn,s as zn,ax as On,ay as Kn,az as Rn,aA as qn,aB as Un,aC as jn,aD as sn,aE as Gn,aF as on,aG as Wn,aH as Zn,aI as Jn,aJ as Xn,aK as Qn,aL as Yn,aM as _n,aN as de,aO as xn,aP as ea,R as na,aQ as $e,J as we,D as rn,aR as aa,E as ta,aS as la}from"./index.974e6f7f.js";import{E as dn,a as sa}from"./el-checkbox.7dc807fb.js";import{E as oa}from"./index2.9a19a621.js";import{u as Ge,a as We}from"./index2.65788b77.js";var ra=re({name:"NodeContent",setup(){return{ns:te("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:a}=this.$parent,{data:l,label:t}=n,{renderLabelFn:i}=a;return Se("span",{class:e.e("label")},i?i({node:n,data:l}):t)}});const Ae=Symbol(),ia=re({name:"ElCascaderNode",components:{ElCheckbox:dn,ElRadio:oa,NodeContent:ra,ElIcon:Te,Check:Xe,Loading:Qe,ArrowRight:Ye},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const a=ke(Ae),l=te("cascader-node"),t=g(()=>a.isHoverMenu),i=g(()=>a.config.multiple),r=g(()=>a.config.checkStrictly),d=g(()=>{var C;return(C=a.checkedNodes[0])==null?void 0:C.uid}),v=g(()=>e.node.isDisabled),p=g(()=>e.node.isLeaf),h=g(()=>r.value&&!p.value||!v.value),T=g(()=>m(a.expandingNode)),u=g(()=>r.value&&a.checkedNodes.some(m)),m=C=>{var z;const{level:_,uid:le}=e.node;return((z=C==null?void 0:C.pathNodes[_-1])==null?void 0:z.uid)===le},b=()=>{T.value||a.expandNode(e.node)},D=C=>{const{node:z}=e;C!==z.checked&&a.handleCheckChange(z,C)},o=()=>{a.lazyLoad(e.node,()=>{p.value||b()})},S=C=>{!t.value||(F(),!p.value&&n("expand",C))},F=()=>{const{node:C}=e;!h.value||C.loading||(C.loaded?b():o())},q=()=>{t.value&&!p.value||(p.value&&!v.value&&!r.value&&!i.value?j(!0):F())},W=C=>{r.value?(D(C),e.node.loaded&&b()):j(C)},j=C=>{e.node.loaded?(D(C),!r.value&&b()):o()};return{panel:a,isHoverMenu:t,multiple:i,checkStrictly:r,checkedNodeId:d,isDisabled:v,isLeaf:p,expandable:h,inExpandingPath:T,inCheckedPath:u,ns:l,handleHoverExpand:S,handleExpand:F,handleClick:q,handleCheck:j,handleSelectCheck:W}}}),da=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ua=Y("span",null,null,-1);function ca(e,n,a,l,t,i){const r=w("el-checkbox"),d=w("el-radio"),v=w("check"),p=w("el-icon"),h=w("node-content"),T=w("loading"),u=w("arrow-right");return k(),H("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:N([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:n[2]||(n[2]=(...m)=>e.handleHoverExpand&&e.handleHoverExpand(...m)),onFocus:n[3]||(n[3]=(...m)=>e.handleHoverExpand&&e.handleHoverExpand(...m)),onClick:n[4]||(n[4]=(...m)=>e.handleClick&&e.handleClick(...m))},[U(" prefix "),e.multiple?(k(),R(r,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:n[0]||(n[0]=ge(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(k(),R(d,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:n[1]||(n[1]=ge(()=>{},["stop"]))},{default:P(()=>[U(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ua]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(k(),R(p,{key:2,class:N(e.ns.e("prefix"))},{default:P(()=>[B(v)]),_:1},8,["class"])):U("v-if",!0),U(" content "),B(h),U(" postfix "),e.isLeaf?U("v-if",!0):(k(),H(oe,{key:3},[e.node.loading?(k(),R(p,{key:0,class:N([e.ns.is("loading"),e.ns.e("postfix")])},{default:P(()=>[B(T)]),_:1},8,["class"])):(k(),R(p,{key:1,class:N(["arrow-right",e.ns.e("postfix")])},{default:P(()=>[B(u)]),_:1},8,["class"]))],2112))],42,da)}var ha=fe(ia,[["render",ca],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const pa=re({name:"ElCascaderMenu",components:{Loading:Qe,ElIcon:Te,ElScrollbar:_e,ElCascaderNode:ha},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=en(),a=te("cascader-menu"),{t:l}=Ve(),t=Pn();let i=null,r=null;const d=ke(Ae),v=I(null),p=g(()=>!e.nodes.length),h=g(()=>!d.initialLoaded),T=g(()=>`cascader-menu-${t}-${e.index}`),u=o=>{i=o.target},m=o=>{if(!(!d.isHoverMenu||!i||!v.value))if(i.contains(o.target)){b();const S=n.vnode.el,{left:F}=S.getBoundingClientRect(),{offsetWidth:q,offsetHeight:W}=S,j=o.clientX-F,C=i.offsetTop,z=C+i.offsetHeight;v.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${C} L${q} 0 V${C} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${j} ${z} L${q} ${W} V${z} Z" />
        `}else r||(r=window.setTimeout(D,d.config.hoverThreshold))},b=()=>{!r||(clearTimeout(r),r=null)},D=()=>{!v.value||(v.value.innerHTML="",b())};return{ns:a,panel:d,hoverZone:v,isEmpty:p,isLoading:h,menuId:T,t:l,handleExpand:u,handleMouseMove:m,clearHoverZone:D}}});function fa(e,n,a,l,t,i){const r=w("el-cascader-node"),d=w("loading"),v=w("el-icon"),p=w("el-scrollbar");return k(),R(p,{key:e.menuId,tag:"ul",role:"menu",class:N(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:P(()=>{var h;return[(k(!0),H(oe,null,ue(e.nodes,T=>(k(),R(r,{key:T.uid,node:T,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(k(),H("div",{key:0,class:N(e.ns.e("empty-text"))},[B(v,{size:"14",class:N(e.ns.is("loading"))},{default:P(()=>[B(d)]),_:1},8,["class"]),xe(" "+Z(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(k(),H("div",{key:1,class:N(e.ns.e("empty-text"))},Z(e.t("el.cascader.noData")),3)):(h=e.panel)!=null&&h.isHoverMenu?(k(),H("svg",{key:2,ref:"hoverZone",class:N(e.ns.e("hover-zone"))},null,2)):U("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var va=fe(pa,[["render",fa],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]),Be=(e=>(e.CLICK="click",e.HOVER="hover",e))(Be||{});let ga=0;const ma=e=>{const n=[e];let{parent:a}=e;for(;a;)n.unshift(a),a=a.parent;return n};class pe{constructor(n,a,l,t=!1){this.data=n,this.config=a,this.parent=l,this.root=t,this.uid=ga++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:i,label:r,children:d}=a,v=n[d],p=ma(this);this.level=t?0:l?l.level+1:1,this.value=n[i],this.label=n[r],this.pathNodes=p,this.pathValues=p.map(h=>h.value),this.pathLabels=p.map(h=>h.label),this.childrenData=v,this.children=(v||[]).map(h=>new pe(h,a,this)),this.loaded=!a.lazy||this.isLeaf||!Le(v)}get isDisabled(){const{data:n,parent:a,config:l}=this,{disabled:t,checkStrictly:i}=l;return(Ue(t)?t(n,this):!!n[t])||!i&&(a==null?void 0:a.isDisabled)}get isLeaf(){const{data:n,config:a,childrenData:l,loaded:t}=this,{lazy:i,leaf:r}=a,d=Ue(r)?r(n,this):n[r];return Dn(d)?i&&!t?!1:!(Array.isArray(l)&&l.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:a,children:l}=this,t=new pe(n,this.config,this);return Array.isArray(a)?a.push(n):this.childrenData=[n],l.push(t),t}calcText(n,a){const l=n?this.pathLabels.join(a):this.label;return this.text=l,l}broadcast(n,...a){const l=`onParent${je(n)}`;this.children.forEach(t=>{t&&(t.broadcast(n,...a),t[l]&&t[l](...a))})}emit(n,...a){const{parent:l}=this,t=`onChild${je(n)}`;l&&(l[t]&&l[t](...a),l.emit(n,...a))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,a=n.filter(t=>!t.isDisabled),l=a.length?a.every(t=>t.checked):!1;this.setCheckState(l)}setCheckState(n){const a=this.children.length,l=this.children.reduce((t,i)=>{const r=i.checked?1:i.indeterminate?.5:0;return t+r},0);this.checked=this.loaded&&this.children.every(t=>t.loaded&&t.checked)&&n,this.indeterminate=this.loaded&&l!==a&&l>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:a,multiple:l}=this.config;a||!l?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}}const Me=(e,n)=>e.reduce((a,l)=>(l.isLeaf?a.push(l):(!n&&a.push(l),a=a.concat(Me(l.children,n))),a),[]);class Ze{constructor(n,a){this.config=a;const l=(n||[]).map(t=>new pe(t,this.config));this.nodes=l,this.allNodes=Me(l,!1),this.leafNodes=Me(l,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,a){const l=a?a.appendChild(n):new pe(n,this.config);a||this.nodes.push(l),this.allNodes.push(l),l.isLeaf&&this.leafNodes.push(l)}appendNodes(n,a){n.forEach(l=>this.appendNode(l,a))}getNodeByValue(n,a=!1){return!n&&n!==0?null:this.getFlattedNodes(a).find(t=>me(t.value,n)||me(t.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:l,level:t})=>me(n.value,l)&&n.level===t)||null}}const un={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},ka={expandTrigger:Be.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Sn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ca=e=>g(()=>se(se({},ka),e.props)),Je=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},ba=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():Ln(e)&&e.click()},ya=(e,n)=>{const a=n.slice(0),l=a.map(i=>i.uid),t=e.reduce((i,r)=>{const d=l.indexOf(r.uid);return d>-1&&(i.push(r),a.splice(d,1),l.splice(d,1)),i},[]);return t.push(...a),t},Ea=re({name:"ElCascaderPanel",components:{ElCascaderMenu:va},props:ve(se({},un),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[ce,he,"close","expand-change"],setup(e,{emit:n,slots:a}){let l=!1;const t=te("cascader"),i=Ca(e);let r=null;const d=I(!0),v=I([]),p=I(null),h=I([]),T=I(null),u=I([]),m=g(()=>i.value.expandTrigger===Be.HOVER),b=g(()=>e.renderLabel||a.default),D=()=>{const{options:f}=e,y=i.value;l=!1,r=new Ze(f,y),h.value=[r.getNodes()],y.lazy&&Le(e.options)?(d.value=!1,o(void 0,E=>{E&&(r=new Ze(E,y),h.value=[r.getNodes()]),d.value=!0,_(!1,!0)})):_(!1,!0)},o=(f,y)=>{const E=i.value;f=f||new pe({},E,void 0,!0),f.loading=!0;const L=V=>{const M=f,X=M.root?null:M;V&&(r==null||r.appendNodes(V,X)),M.loading=!1,M.loaded=!0,M.childrenData=M.childrenData||[],y&&y(V)};E.lazyLoad(f,L)},S=(f,y)=>{var E;const{level:L}=f,V=h.value.slice(0,L);let M;f.isLeaf?M=f.pathNodes[L-2]:(M=f,V.push(f.children)),((E=T.value)==null?void 0:E.uid)!==(M==null?void 0:M.uid)&&(T.value=f,h.value=V,!y&&n("expand-change",(f==null?void 0:f.pathValues)||[]))},F=(f,y,E=!0)=>{const{checkStrictly:L,multiple:V}=i.value,M=u.value[0];l=!0,!V&&(M==null||M.doCheck(!1)),f.doCheck(y),z(),E&&!V&&!L&&n("close"),!E&&!V&&!L&&q(f)},q=f=>{!f||(f=f.parent,q(f),f&&S(f))},W=f=>r==null?void 0:r.getFlattedNodes(f),j=f=>{var y;return(y=W(f))==null?void 0:y.filter(E=>E.checked!==!1)},C=()=>{u.value.forEach(f=>f.doCheck(!1)),z()},z=()=>{var f;const{checkStrictly:y,multiple:E}=i.value,L=u.value,V=j(!y),M=ya(L,V),X=M.map(A=>A.valueByOption);u.value=M,p.value=E?X:(f=X[0])!=null?f:null},_=(f=!1,y=!1)=>{const{modelValue:E}=e,{lazy:L,multiple:V,checkStrictly:M}=i.value,X=!M;if(!(!d.value||l||!y&&me(E,p.value)))if(L&&!f){const x=Ge(Hn(We(E))).map(G=>r==null?void 0:r.getNodeByValue(G)).filter(G=>!!G&&!G.loaded&&!G.loading);x.length?x.forEach(G=>{o(G,()=>_(!1,y))}):_(!0,y)}else{const A=V?We(E):[E],x=Ge(A.map(G=>r==null?void 0:r.getNodeByValue(G,X)));le(x,!1),p.value=E}},le=(f,y=!0)=>{const{checkStrictly:E}=i.value,L=u.value,V=f.filter(A=>!!A&&(E||A.isLeaf)),M=r==null?void 0:r.getSameNode(T.value),X=y&&M||V[0];X?X.pathNodes.forEach(A=>S(A,!0)):T.value=null,L.forEach(A=>A.doCheck(!1)),V.forEach(A=>A.doCheck(!0)),u.value=V,ie(Ce)},Ce=()=>{!an||v.value.forEach(f=>{const y=f==null?void 0:f.$el;if(y){const E=y.querySelector(`.${t.namespace.value}-scrollbar__wrap`),L=y.querySelector(`.${t.b("node")}.${t.is("active")}`)||y.querySelector(`.${t.b("node")}.in-active-path`);An(E,L)}})},ne=f=>{const y=f.target,{code:E}=f;switch(E){case K.up:case K.down:{f.preventDefault();const L=E===K.up?-1:1;be(tn(y,L,`.${t.b("node")}[tabindex="-1"]`));break}case K.left:{f.preventDefault();const L=v.value[Je(y)-1],V=L==null?void 0:L.$el.querySelector(`.${t.b("node")}[aria-expanded="true"]`);be(V);break}case K.right:{f.preventDefault();const L=v.value[Je(y)+1],V=L==null?void 0:L.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`);be(V);break}case K.enter:ba(y);break;case K.esc:case K.tab:n("close");break}};return Mn(Ae,He({config:i,expandingNode:T,checkedNodes:u,isHoverMenu:m,initialLoaded:d,renderLabelFn:b,lazyLoad:o,expandNode:S,handleCheckChange:F})),J([i,()=>e.options],D,{deep:!0,immediate:!0}),J(()=>e.modelValue,()=>{l=!1,_()}),J(p,f=>{me(f,e.modelValue)||(n(ce,f),n(he,f))}),In(()=>v.value=[]),nn(()=>!Le(e.modelValue)&&_()),{ns:t,menuList:v,menus:h,checkedNodes:u,handleKeyDown:ne,handleCheckChange:F,getFlattedNodes:W,getCheckedNodes:j,clearCheckedNodes:C,calculateCheckedValue:z,scrollToExpandingNode:Ce}}});function Na(e,n,a,l,t,i){const r=w("el-cascader-menu");return k(),H("div",{class:N([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:n[0]||(n[0]=(...d)=>e.handleKeyDown&&e.handleKeyDown(...d))},[(k(!0),H(oe,null,ue(e.menus,(d,v)=>(k(),R(r,{key:v,ref_for:!0,ref:p=>e.menuList[v]=p,index:v,nodes:[...d]},null,8,["index","nodes"]))),128))],34)}var ye=fe(Ea,[["render",Na],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);ye.install=e=>{e.component(ye.name,ye)};const $a=ye,wa=40,Ta={large:36,default:32,small:28},Va={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:n,placement:a}=e;["right","left","bottom","top"].includes(a)||(n.arrow.x=35)},requires:["arrow"]}]},Pa="ElCascader",Da=re({name:Pa,components:{ElCascaderPanel:$a,ElInput:ln,ElTooltip:Bn,ElScrollbar:_e,ElTag:Fn,ElIcon:Te,CircleClose:zn,Check:Xe,ArrowDown:On},directives:{Clickoutside:Kn},props:ve(se({},un),{size:{type:String,validator:Rn},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},teleported:qn.teleported,tagType:ve(se({},Un.type),{default:"info"})}),emits:[ce,he,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:n}){let a=0,l=0;const t=te("cascader"),i=te("input"),{t:r}=Ve(),d=ke(jn,{}),v=ke(sn,{}),p=I(null),h=I(null),T=I(null),u=I(null),m=I(null),b=I(!1),D=I(!1),o=I(!1),S=I(""),F=I(""),q=I([]),W=I([]),j=I([]),C=I(!1),z=g(()=>e.disabled||d.disabled),_=g(()=>e.placeholder||r("el.cascader.placeholder")),le=Gn(),Ce=g(()=>["small"].includes(le.value)?"small":"default"),ne=g(()=>!!e.props.multiple),f=g(()=>!e.filterable||ne.value),y=g(()=>ne.value?F.value:S.value),E=g(()=>{var s;return((s=u.value)==null?void 0:s.checkedNodes)||[]}),L=g(()=>!e.clearable||z.value||o.value||!D.value?!1:!!E.value.length),V=g(()=>{const{showAllLevels:s,separator:c}=e,$=E.value;return $.length?ne.value?" ":$[0].calcText(s,c):""}),M=g({get(){return e.modelValue},set(s){var c;n(ce,s),n(he,s),(c=v.validate)==null||c.call(v,"change").catch($=>on())}}),X=g(()=>{var s,c;return(c=(s=p.value)==null?void 0:s.popperRef)==null?void 0:c.contentRef}),A=s=>{var c,$,O;if(!z.value&&(s=s!=null?s:!b.value,s!==b.value)){if(b.value=s,($=(c=h.value)==null?void 0:c.input)==null||$.setAttribute("aria-expanded",`${s}`),s)x(),ie((O=u.value)==null?void 0:O.scrollToExpandingNode);else if(e.filterable){const{value:ee}=V;S.value=ee,F.value=ee}n("visible-change",s)}},x=()=>{ie(()=>{var s;(s=p.value)==null||s.updatePopper()})},G=()=>{o.value=!1},Pe=s=>{const{showAllLevels:c,separator:$}=e;return{node:s,key:s.uid,text:s.calcText(c,$),hitState:!1,closable:!z.value&&!s.isDisabled,isCollapseTag:!1}},Fe=s=>{var c;const $=s.node;$.doCheck(!1),(c=u.value)==null||c.calculateCheckedValue(),n("remove-tag",$.valueByOption)},pn=()=>{if(!ne.value)return;const s=E.value,c=[],$=[];if(s.forEach(O=>$.push(Pe(O))),W.value=$,s.length){const[O,...ee]=s,ae=ee.length;c.push(Pe(O)),ae&&(e.collapseTags?c.push({key:-1,text:`+ ${ae}`,closable:!1,isCollapseTag:!0}):ee.forEach(Q=>c.push(Pe(Q))))}q.value=c},ze=()=>{var s,c;const{filterMethod:$,showAllLevels:O,separator:ee}=e,ae=(c=(s=u.value)==null?void 0:s.getFlattedNodes(!e.props.checkStrictly))==null?void 0:c.filter(Q=>Q.isDisabled?!1:(Q.calcText(O,ee),$(Q,y.value)));ne.value&&(q.value.forEach(Q=>{Q.hitState=!1}),W.value.forEach(Q=>{Q.hitState=!1})),o.value=!0,j.value=ae,x()},Oe=()=>{var s;let c;o.value&&m.value?c=m.value.$el.querySelector(`.${t.e("suggestion-item")}`):c=(s=u.value)==null?void 0:s.$el.querySelector(`.${t.b("node")}[tabindex="-1"]`),c&&(c.focus(),!o.value&&c.click())},De=()=>{var s,c;const $=(s=h.value)==null?void 0:s.input,O=T.value,ee=(c=m.value)==null?void 0:c.$el;if(!(!an||!$)){if(ee){const ae=ee.querySelector(`.${t.e("suggestion-list")}`);ae.style.minWidth=`${$.offsetWidth}px`}if(O){const{offsetHeight:ae}=O,Q=q.value.length>0?`${Math.max(ae+6,a)}px`:`${a}px`;$.style.height=Q,x()}}},fn=s=>{var c;return(c=u.value)==null?void 0:c.getCheckedNodes(s)},vn=s=>{x(),n("expand-change",s)},gn=s=>{var c;const $=(c=s.target)==null?void 0:c.value;if(s.type==="compositionend")C.value=!1,ie(()=>Ke($));else{const O=$[$.length-1]||"";C.value=!Yn(O)}},mn=s=>{if(!C.value)switch(s.code){case K.enter:A();break;case K.down:A(!0),ie(Oe),s.preventDefault();break;case K.esc:case K.tab:A(!1);break}},kn=()=>{var s;(s=u.value)==null||s.clearCheckedNodes(),A(!1)},Cn=s=>{var c,$;const{checked:O}=s;ne.value?(c=u.value)==null||c.handleCheckChange(s,!O,!1):(!O&&(($=u.value)==null||$.handleCheckChange(s,!0,!1)),A(!1))},bn=s=>{const c=s.target,{code:$}=s;switch($){case K.up:case K.down:{const O=$===K.up?-1:1;be(tn(c,O,`.${t.e("suggestion-item")}[tabindex="-1"]`));break}case K.enter:c.click();break;case K.esc:case K.tab:A(!1);break}},yn=()=>{const s=q.value,c=s[s.length-1];l=F.value?0:l+1,!(!c||!l)&&(c.hitState?Fe(c):c.hitState=!0)},En=Wn(()=>{const{value:s}=y;if(!s)return;const c=e.beforeFilter(s);Zn(c)?c.then(ze).catch(()=>{}):c!==!1?ze():G()},e.debounce),Ke=(s,c)=>{!b.value&&A(!0),!(c!=null&&c.isComposing)&&(s?En():G())};return J(o,x),J([E,z],pn),J(q,()=>{ie(()=>De())}),J(V,s=>S.value=s,{immediate:!0}),nn(()=>{var s;const c=(s=h.value)==null?void 0:s.$el;a=(c==null?void 0:c.offsetHeight)||Ta[le.value]||wa,Jn(c,De)}),Xn(()=>{var s;Qn((s=h.value)==null?void 0:s.$el,De)}),{popperOptions:Va,tooltipRef:p,popperPaneRef:X,input:h,tagWrapper:T,panel:u,suggestionPanel:m,popperVisible:b,inputHover:D,inputPlaceholder:_,filtering:o,presentText:V,checkedValue:M,inputValue:S,searchInputValue:F,presentTags:q,allPresentTags:W,suggestions:j,isDisabled:z,isOnComposition:C,realSize:le,tagSize:Ce,multiple:ne,readonly:f,clearBtnVisible:L,nsCascader:t,nsInput:i,t:r,togglePopperVisible:A,hideSuggestionPanel:G,deleteTag:Fe,focusFirstNode:Oe,getCheckedNodes:fn,handleExpandChange:vn,handleKeyDown:mn,handleComposition:gn,handleClear:kn,handleSuggestionClick:Cn,handleSuggestionKeyDown:bn,handleDelete:yn,handleInput:Ke}}}),Sa={key:0},La={class:"el-cascader__collapse-tags"},Ma=["placeholder"],Ia=["onClick"];function Ha(e,n,a,l,t,i){const r=w("circle-close"),d=w("el-icon"),v=w("arrow-down"),p=w("el-input"),h=w("el-tag"),T=w("el-tooltip"),u=w("el-cascader-panel"),m=w("check"),b=w("el-scrollbar"),D=_n("clickoutside");return k(),R(T,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":n[17]||(n[17]=o=>e.popperVisible=o),teleported:e.teleported,"popper-class":[e.nsCascader.e("dropdown"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${e.nsCascader.namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:P(()=>[de((k(),H("div",{class:N([e.nsCascader.b(),e.nsCascader.m(e.realSize),e.nsCascader.is("disabled",e.isDisabled),e.$attrs.class]),style:na(e.$attrs.style),onClick:n[11]||(n[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:n[12]||(n[12]=(...o)=>e.handleKeyDown&&e.handleKeyDown(...o)),onMouseenter:n[13]||(n[13]=o=>e.inputHover=!0),onMouseleave:n[14]||(n[14]=o=>e.inputHover=!1)},[B(p,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":n[1]||(n[1]=o=>e.inputValue=o),placeholder:e.searchInputValue?"":e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:N(e.nsCascader.is("focus",e.popperVisible)),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:n[2]||(n[2]=o=>e.$emit("focus",o)),onBlur:n[3]||(n[3]=o=>e.$emit("blur",o)),onInput:e.handleInput},{suffix:P(()=>[e.clearBtnVisible?(k(),R(d,{key:"clear",class:N([e.nsInput.e("icon"),"icon-circle-close"]),onClick:ge(e.handleClear,["stop"])},{default:P(()=>[B(r)]),_:1},8,["class","onClick"])):(k(),R(d,{key:"arrow-down",class:N([e.nsInput.e("icon"),"icon-arrow-down",e.nsCascader.is("reverse",e.popperVisible)]),onClick:n[0]||(n[0]=ge(o=>e.togglePopperVisible(),["stop"]))},{default:P(()=>[B(v)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(k(),H("div",{key:0,ref:"tagWrapper",class:N(e.nsCascader.e("tags"))},[(k(!0),H(oe,null,ue(e.presentTags,o=>(k(),R(h,{key:o.key,type:e.tagType,size:e.tagSize,hit:o.hitState,closable:o.closable,"disable-transitions":"",onClose:S=>e.deleteTag(o)},{default:P(()=>[o.isCollapseTag===!1?(k(),H("span",Sa,Z(o.text),1)):(k(),R(T,{key:1,teleported:!1,disabled:e.popperVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:P(()=>[Y("span",null,Z(o.text),1)]),content:P(()=>[Y("div",La,[(k(!0),H(oe,null,ue(e.allPresentTags,(S,F)=>(k(),H("div",{key:F,class:"el-cascader__collapse-tag"},[(k(),R(h,{key:S.key,class:"in-tooltip",type:e.tagType,size:e.tagSize,hit:S.hitState,closable:S.closable,"disable-transitions":"",onClose:q=>e.deleteTag(S)},{default:P(()=>[Y("span",null,Z(S.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))]))),128))])]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?de((k(),H("input",{key:0,"onUpdate:modelValue":n[4]||(n[4]=o=>e.searchInputValue=o),type:"text",class:N(e.nsCascader.e("search-input")),placeholder:e.presentText?"":e.inputPlaceholder,onInput:n[5]||(n[5]=o=>e.handleInput(e.searchInputValue,o)),onClick:n[6]||(n[6]=ge(o=>e.togglePopperVisible(!0),["stop"])),onKeydown:n[7]||(n[7]=xn((...o)=>e.handleDelete&&e.handleDelete(...o),["delete"])),onCompositionstart:n[8]||(n[8]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionupdate:n[9]||(n[9]=(...o)=>e.handleComposition&&e.handleComposition(...o)),onCompositionend:n[10]||(n[10]=(...o)=>e.handleComposition&&e.handleComposition(...o))},null,42,Ma)),[[ea,e.searchInputValue]]):U("v-if",!0)],2)):U("v-if",!0)],38)),[[D,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:P(()=>[de(B(u,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":n[15]||(n[15]=o=>e.checkedValue=o),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:n[16]||(n[16]=o=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[$e,!e.filtering]]),e.filterable?de((k(),R(b,{key:0,ref:"suggestionPanel",tag:"ul",class:N(e.nsCascader.e("suggestion-panel")),"view-class":e.nsCascader.e("suggestion-list"),onKeydown:e.handleSuggestionKeyDown},{default:P(()=>[e.suggestions.length?(k(!0),H(oe,{key:0},ue(e.suggestions,o=>(k(),H("li",{key:o.uid,class:N([e.nsCascader.e("suggestion-item"),e.nsCascader.is("checked",o.checked)]),tabindex:-1,onClick:S=>e.handleSuggestionClick(o)},[Y("span",null,Z(o.text),1),o.checked?(k(),R(d,{key:0},{default:P(()=>[B(m)]),_:1})):U("v-if",!0)],10,Ia))),128)):we(e.$slots,"empty",{key:1},()=>[Y("li",{class:N(e.nsCascader.e("empty-text"))},Z(e.t("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class","onKeydown"])),[[$e,e.filtering]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-options","transition","onHide"])}var Ee=fe(Da,[["render",Ha],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/index.vue"]]);Ee.install=e=>{e.component(Ee.name,Ee)};const Aa=Ee,et=Aa,Ie="checked-change",Ba={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},Fa=(e,n)=>{const{emit:a}=en(),l=g(()=>e.props.label||"label"),t=g(()=>e.props.key||"key"),i=g(()=>e.props.disabled||"disabled"),r=g(()=>e.data.filter(u=>typeof e.filterMethod=="function"?e.filterMethod(n.query,u):(u[l.value]||u[t.value].toString()).toLowerCase().includes(n.query.toLowerCase()))),d=g(()=>r.value.filter(u=>!u[i.value])),v=g(()=>{const u=n.checked.length,m=e.data.length,{noChecked:b,hasChecked:D}=e.format;return b&&D?u>0?D.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,m.toString()):b.replace(/\${total}/g,m.toString()):`${u}/${m}`}),p=g(()=>{const u=n.checked.length;return u>0&&u<d.value.length}),h=()=>{const u=d.value.map(m=>m[t.value]);n.allChecked=u.length>0&&u.every(m=>n.checked.includes(m))},T=u=>{n.checked=u?d.value.map(m=>m[t.value]):[]};return J(()=>n.checked,(u,m)=>{if(h(),n.checkChangeByUser){const b=u.concat(m).filter(D=>!u.includes(D)||!m.includes(D));a(Ie,u,b)}else a(Ie,u),n.checkChangeByUser=!0}),J(d,()=>{h()}),J(()=>e.data,()=>{const u=[],m=r.value.map(b=>b[t.value]);n.checked.forEach(b=>{m.includes(b)&&u.push(b)}),n.checkChangeByUser=!1,n.checked=u}),J(()=>e.defaultChecked,(u,m)=>{if(m&&u.length===m.length&&u.every(o=>m.includes(o)))return;const b=[],D=d.value.map(o=>o[t.value]);u.forEach(o=>{D.includes(o)&&b.push(o)}),n.checkChangeByUser=!1,n.checked=b},{immediate:!0}),{labelProp:l,keyProp:t,disabledProp:i,filteredData:r,checkableData:d,checkedSummary:v,isIndeterminate:p,updateAllChecked:h,handleAllCheckedChange:T}},za=re({name:"ElTransferPanel",components:{ElCheckboxGroup:sa,ElCheckbox:dn,ElInput:ln,OptionContent:({option:e})=>e},props:Ba,emits:[Ie],setup(e,{slots:n}){const{t:a}=Ve(),l=te("transfer"),t=He({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:i,keyProp:r,disabledProp:d,filteredData:v,checkedSummary:p,isIndeterminate:h,handleAllCheckedChange:T}=Fa(e,t),u=g(()=>t.query.length>0&&v.value.length===0),m=g(()=>!!n.default()[0].children.length),{checked:b,allChecked:D,query:o,inputHover:S,checkChangeByUser:F}=rn(t);return{ns:l,labelProp:i,keyProp:r,disabledProp:d,filteredData:v,checkedSummary:p,isIndeterminate:h,handleAllCheckedChange:T,checked:b,allChecked:D,query:o,inputHover:S,checkChangeByUser:F,hasNoMatch:u,SearchIcon:aa,hasFooter:m,t:a}}});function Oa(e,n,a,l,t,i){const r=w("el-checkbox"),d=w("el-input"),v=w("option-content"),p=w("el-checkbox-group");return k(),H("div",{class:N(e.ns.b("panel"))},[Y("p",{class:N(e.ns.be("panel","header"))},[B(r,{modelValue:e.allChecked,"onUpdate:modelValue":n[0]||(n[0]=h=>e.allChecked=h),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:P(()=>[xe(Z(e.title)+" ",1),Y("span",null,Z(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),Y("div",{class:N([e.ns.be("panel","body"),e.ns.is("with-footer",e.hasFooter)])},[e.filterable?(k(),R(d,{key:0,modelValue:e.query,"onUpdate:modelValue":n[1]||(n[1]=h=>e.query=h),class:N(e.ns.be("panel","filter")),size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:n[2]||(n[2]=h=>e.inputHover=!0),onMouseleave:n[3]||(n[3]=h=>e.inputHover=!1)},null,8,["modelValue","class","placeholder","prefix-icon"])):U("v-if",!0),de(B(p,{modelValue:e.checked,"onUpdate:modelValue":n[4]||(n[4]=h=>e.checked=h),class:N([e.ns.is("filterable",e.filterable),e.ns.be("panel","list")])},{default:P(()=>[(k(!0),H(oe,null,ue(e.filteredData,h=>(k(),R(r,{key:h[e.keyProp],class:N(e.ns.be("panel","item")),label:h[e.keyProp],disabled:h[e.disabledProp]},{default:P(()=>[B(v,{option:e.optionRender(h)},null,8,["option"])]),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[$e,!e.hasNoMatch&&e.data.length>0]]),de(Y("p",{class:N(e.ns.be("panel","empty"))},Z(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),3),[[$e,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(k(),H("p",{key:0,class:N(e.ns.be("panel","footer"))},[we(e.$slots,"default")],2)):U("v-if",!0)],2)}var Ka=fe(za,[["render",Oa],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const Ra=e=>{const n=g(()=>e.props.key),a=g(()=>e.data.reduce((i,r)=>(i[r[n.value]]=r)&&i,{})),l=g(()=>e.data.filter(i=>!e.modelValue.includes(i[n.value]))),t=g(()=>e.targetOrder==="original"?e.data.filter(i=>e.modelValue.includes(i[n.value])):e.modelValue.reduce((i,r)=>{const d=a.value[r];return d&&i.push(d),i},[]));return{propsKey:n,sourceData:l,targetData:t}},cn="left-check-change",hn="right-check-change",qa=(e,n)=>({onSourceCheckedChange:(t,i)=>{e.leftChecked=t,i!==void 0&&n(cn,t,i)},onTargetCheckedChange:(t,i)=>{e.rightChecked=t,i!==void 0&&n(hn,t,i)}}),Ua=(e,n,a,l)=>{const t=(d,v,p)=>{l(ce,d),l(he,d,v,p)};return{addToLeft:()=>{const d=e.modelValue.slice();n.rightChecked.forEach(v=>{const p=d.indexOf(v);p>-1&&d.splice(p,1)}),t(d,"left",n.rightChecked)},addToRight:()=>{let d=e.modelValue.slice();const v=e.data.filter(p=>{const h=p[a.value];return n.leftChecked.includes(h)&&!e.modelValue.includes(h)}).map(p=>p[a.value]);d=e.targetOrder==="unshift"?v.concat(d):d.concat(v),e.targetOrder==="original"&&(d=e.data.filter(p=>d.includes(p[a.value])).map(p=>p[a.value])),t(d,"right",n.leftChecked)}}},ja=re({name:"ElTransfer",components:{TransferPanel:Ka,ElButton:ta,ElIcon:Te,ArrowLeft:la,ArrowRight:Ye},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[ce,he,cn,hn],setup(e,{emit:n,slots:a}){const{t:l}=Ve(),t=te("transfer"),i=ke(sn,{}),r=He({leftChecked:[],rightChecked:[]}),{propsKey:d,sourceData:v,targetData:p}=Ra(e),{onSourceCheckedChange:h,onTargetCheckedChange:T}=qa(r,n),{addToLeft:u,addToRight:m}=Ua(e,r,d,n),b=I(),D=I(),o=C=>{switch(C){case"left":b.value.query="";break;case"right":D.value.query="";break}},S=g(()=>e.buttonTexts.length===2),F=g(()=>e.titles[0]||l("el.transfer.titles.0")),q=g(()=>e.titles[1]||l("el.transfer.titles.1")),W=g(()=>e.filterPlaceholder||l("el.transfer.filterPlaceholder"));J(()=>e.modelValue,()=>{var C;(C=i.validate)==null||C.call(i,"change").catch(z=>on())});const j=g(()=>C=>e.renderContent?e.renderContent(Se,C):a.default?a.default({option:C}):Se("span",C[e.props.label]||C[e.props.key]));return ve(se({ns:t,sourceData:v,targetData:p,onSourceCheckedChange:h,onTargetCheckedChange:T,addToLeft:u,addToRight:m},rn(r)),{hasButtonTexts:S,leftPanelTitle:F,rightPanelTitle:q,panelFilterPlaceholder:W,clearQuery:o,leftPanel:b,rightPanel:D,optionRender:j})}}),Ga={key:0},Wa={key:0};function Za(e,n,a,l,t,i){const r=w("transfer-panel"),d=w("arrow-left"),v=w("el-icon"),p=w("el-button"),h=w("arrow-right");return k(),H("div",{class:N(e.ns.b())},[B(r,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:P(()=>[we(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),Y("div",{class:N(e.ns.e("buttons"))},[B(p,{type:"primary",class:N([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:P(()=>[B(v,null,{default:P(()=>[B(d)]),_:1}),e.buttonTexts[0]!==void 0?(k(),H("span",Ga,Z(e.buttonTexts[0]),1)):U("v-if",!0)]),_:1},8,["class","disabled","onClick"]),B(p,{type:"primary",class:N([e.ns.e("button"),e.ns.is("with-texts",e.hasButtonTexts)]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:P(()=>[e.buttonTexts[1]!==void 0?(k(),H("span",Wa,Z(e.buttonTexts[1]),1)):U("v-if",!0),B(v,null,{default:P(()=>[B(h)]),_:1})]),_:1},8,["class","disabled","onClick"])],2),B(r,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:P(()=>[we(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2)}var Ne=fe(ja,[["render",Za],["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/index.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const Ja=Ne,nt=Ja;export{et as E,nt as a};
