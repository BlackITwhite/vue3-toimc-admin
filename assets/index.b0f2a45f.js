var Se=Object.defineProperty,Te=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var J=(e,s,t)=>s in e?Se(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,P=(e,s)=>{for(var t in s||(s={}))De.call(s,t)&&J(e,t,s[t]);if(G)for(var t of G(s))we.call(s,t)&&J(e,t,s[t]);return e},M=(e,s)=>Te(e,Ce(s));import{d as T}from"./date-utils.92a15094.js";import{T as Re,b as ye,g as Ae,c as Pe,t as Me,d as Ve,D as Ee,C as Oe}from"./index.7f4d56fe.js";import{e as Y,a8 as Be,u as Q,v,f as E,$ as He,x as $e,ar as k,bC as N,r as Ne,o as Fe,c as Ie,a as g,y as b,t as V,b as W,A as Ue,ak as Ke,a2 as X}from"./index.da4c6fdc.js";const S=(e,s)=>{const t=[];for(let d=e;d<=s;d++)t.push(d);return t},je=Y({components:{TimeSpinner:Re},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,s){const{t,lang:d}=Be(),D=Q("time"),w=Q("picker"),i=v(()=>e.parsedValue[0]),u=v(()=>e.parsedValue[1]),C=ye(e),Z=()=>{s.emit("pick",C.value,!1)},R=v(()=>e.format.includes("ss")),_=v(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),x=E([]),ee=E([]),ne=(n=!1)=>{s.emit("pick",[i.value,u.value],n)},ae=n=>{F(n.millisecond(0),u.value)},se=n=>{F(i.value,n.millisecond(0))},oe=n=>{const a=n.map(l=>T(l).locale(d.value)),o=j(a);return a[0].isSame(o[0])&&a[1].isSame(o[1])},F=(n,a)=>{s.emit("pick",[n,a],!0)},te=v(()=>i.value>u.value),y=E([0,2]),ie=(n,a)=>{s.emit("select-range",n,a,"min"),y.value=[n,a]},B=v(()=>R.value?11:8),re=(n,a)=>{s.emit("select-range",n,a,"max"),y.value=[n+B.value,a+B.value]},le=n=>{const a=R.value?[0,3,6,11,14,17]:[0,3,8,11],o=["hours","minutes"].concat(R.value?["seconds"]:[]),c=(a.indexOf(y.value[0])+n+a.length)%a.length,r=a.length/2;c<r?A.start_emitSelectRange(o[c]):A.end_emitSelectRange(o[c-r])},ce=n=>{const a=n.code;if(a===k.left||a===k.right){const o=a===k.left?-1:1;le(o),n.preventDefault();return}if(a===k.up||a===k.down){const o=a===k.up?-1:1,l=y.value[0]<B.value?"start":"end";A[`${l}_scrollDown`](o),n.preventDefault();return}},I=(n,a)=>{const o=L?L(n):[],l=n==="start",r=(a||(l?u.value:i.value)).hour(),p=l?S(r+1,23):S(0,r-1);return N(o,p)},U=(n,a,o)=>{const l=z?z(n,a):[],c=a==="start",r=o||(c?u.value:i.value),p=r.hour();if(n!==p)return l;const f=r.minute(),m=c?S(f+1,59):S(0,f-1);return N(l,m)},K=(n,a,o,l)=>{const c=q?q(n,a,o):[],r=o==="start",p=l||(r?u.value:i.value),f=p.hour(),m=p.minute();if(n!==f||a!==m)return c;const h=p.second(),$=r?S(h+1,59):S(0,h-1);return N(c,$)},j=n=>n.map((a,o)=>pe(n[0],n[1],o===0?"start":"end")),{getAvailableHours:de,getAvailableMinutes:me,getAvailableSeconds:ue}=Ae(I,U,K),pe=(n,a,o)=>{const l={hour:de,minute:me,second:ue},c=o==="start";let r=c?n:a;const p=c?a:n;return["hour","minute","second"].forEach(f=>{if(l[f]){let m;const h=l[f];if(f==="minute"?m=h(r.hour(),o,p):f==="second"?m=h(r.hour(),r.minute(),o,p):m=h(o,p),m&&m.length&&!m.includes(r[f]())){const $=c?0:m.length-1;r=r[f](m[$])}}}),r},fe=n=>n?Array.isArray(n)?n.map(a=>T(a,e.format).locale(d.value)):T(n,e.format).locale(d.value):null,be=n=>n?Array.isArray(n)?n.map(a=>a.format(e.format)):n.format(e.format):null,ge=()=>{if(Array.isArray(H))return H.map(a=>T(a).locale(d.value));const n=T(H).locale(d.value);return[n,n.add(60,"m")]};s.emit("set-picker-option",["formatToString",be]),s.emit("set-picker-option",["parseUserInput",fe]),s.emit("set-picker-option",["isValidValue",oe]),s.emit("set-picker-option",["handleKeydown",ce]),s.emit("set-picker-option",["getDefaultValue",ge]),s.emit("set-picker-option",["getRangeAvailableTime",j]);const A={},he=n=>{A[n[0]]=n[1]},ve=He("EP_PICKER_BASE"),{arrowControl:ke,disabledHours:L,disabledMinutes:z,disabledSeconds:q,defaultValue:H}=ve.props;return{nsTime:D,nsPicker:w,arrowControl:ke,onSetOption:he,setMaxSelectionRange:re,setMinSelectionRange:ie,btnConfirmDisabled:te,handleCancel:Z,handleConfirm:ne,t,showSeconds:R,minDate:i,maxDate:u,amPmMode:_,handleMinChange:ae,handleMaxChange:se,minSelectableRange:x,maxSelectableRange:ee,disabledHours_:I,disabledMinutes_:U,disabledSeconds_:K}}}),Le=["disabled"];function ze(e,s,t,d,D,w){const i=Ne("time-spinner");return e.actualVisible?(Fe(),Ie("div",{key:0,class:b([e.nsTime.b("range-picker"),e.nsPicker.b("panel")])},[g("div",{class:b(e.nsTime.be("range-picker","content"))},[g("div",{class:b(e.nsTime.be("range-picker","cell"))},[g("div",{class:b(e.nsTime.be("range-picker","header"))},V(e.t("el.datepicker.startTime")),3),g("div",{class:b([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[W(i,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2),g("div",{class:b(e.nsTime.be("range-picker","cell"))},[g("div",{class:b(e.nsTime.be("range-picker","header"))},V(e.t("el.datepicker.endTime")),3),g("div",{class:b([e.nsTime.be("range-picker","body"),e.nsTime.be("panel","content"),e.nsTime.is("arrow",e.arrowControl),{"has-seconds":e.showSeconds}])},[W(i,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)],2)],2),g("div",{class:b(e.nsTime.be("panel","footer"))},[g("button",{type:"button",class:b([e.nsTime.be("panel","btn"),"cancel"]),onClick:s[0]||(s[0]=u=>e.handleCancel())},V(e.t("el.datepicker.cancel")),3),g("button",{type:"button",class:b([e.nsTime.be("panel","btn"),"confirm"]),disabled:e.btnConfirmDisabled,onClick:s[1]||(s[1]=u=>e.handleConfirm())},V(e.t("el.datepicker.confirm")),11,Le)],2)],2)):Ue("v-if",!0)}var qe=$e(je,[["render",ze],["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);T.extend(Pe);var Ge=Y({name:"ElTimePicker",install:null,props:M(P({},Me),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,s){const t=E(null),d=e.isRange?"timerange":"time",D=e.isRange?qe:Ve,w=M(P({},e),{focus:()=>{var i;(i=t.value)==null||i.handleFocus()},blur:()=>{var i;(i=t.value)==null||i.handleBlur()}});return Ke("ElPopperOptions",e.popperOptions),s.expose(w),()=>{var i;const u=(i=e.format)!=null?i:Ee;return X(Oe,M(P({},e),{format:u,type:d,ref:t,"onUpdate:modelValue":C=>s.emit("update:modelValue",C)}),{default:C=>X(D,C)})}}});const O=Ge;O.install=e=>{e.component(O.name,O)};const Ye=O;export{Ye as E};
