import{Z as Q,x as X,bA as c,e as _,J as x,v as ee,bu as ne,aM as te,bB as ae,bC as ue,g as re,h as le,ar as se,bD as ie,A as oe,B as N,aw as h,aT as de,bm as ce,O as me,a2 as be,bE as pe,C as fe,aU as K,r as b,a$ as ve,o as d,c as F,a6 as T,D as C,b0 as w,b as E,w as U,j as I,G as O,a8 as B,am as Ne}from"./index.c3ae39a3.js";import{R as he}from"./index2.61e1d98f.js";const Ve=Q({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:X},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),ge={change:(e,u)=>e!==u,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>c(e),"update:modelValue":e=>c(e)||e===void 0},we=_({name:"ElInputNumber",components:{ElInput:x,ElIcon:ee,ArrowUp:ne,ArrowDown:te,Plus:ae,Minus:ue},directives:{RepeatClick:he},props:Ve,emits:ge,setup(e,{emit:u}){const m=re(),l=le({currentValue:e.modelValue,userInput:null}),{t:P}=se(),{formItem:i}=ie(),y=oe("input-number"),V=N(()=>g(e.modelValue,-1)<e.min),p=N(()=>g(e.modelValue)>e.max),S=N(()=>{const n=$(e.step);return h(e.precision)?Math.max($(e.modelValue),n):(n>e.precision,e.precision)}),A=N(()=>e.controls&&e.controlsPosition==="right"),D=de(),o=ce(),f=N(()=>{if(l.userInput!==null)return l.userInput;let n=l.currentValue;if(c(n)){if(Number.isNaN(n))return"";h(e.precision)||(n=n.toFixed(e.precision))}return n}),z=(n,t)=>{h(t)&&(t=S.value);const a=n.toString().split(".");if(a.length>1){const r=a[0],v=Math.round(+a[1]/10**(a[1].length-t));return Number.parseFloat(`${r}.${v}`)}return Number.parseFloat(`${Math.round(n*10**t)/10**t}`)},$=n=>{if(h(n))return 0;const t=n.toString(),a=t.indexOf(".");let r=0;return a!==-1&&(r=t.length-a-1),r},g=(n,t=1)=>c(n)?(n=c(n)?n:Number.NaN,z(n+e.step*t)):l.currentValue,G=()=>{if(o.value||p.value)return;const n=e.modelValue||0,t=g(n);k(t)},Y=()=>{if(o.value||V.value)return;const n=e.modelValue||0,t=g(n,-1);k(t)},M=(n,t)=>{const{max:a,min:r,step:v,precision:R,stepStrictly:H}=e;let s=Number(n);return n===null&&(s=Number.NaN),Number.isNaN(s)||(H&&(s=Math.round(s/v)*v),h(R)||(s=z(s,R)),(s>a||s<r)&&(s=s>a?a:r,t&&u("update:modelValue",s))),s},k=n=>{var t;const a=l.currentValue;let r=M(n);a!==r&&(Number.isNaN(r)&&(r=void 0),l.userInput=null,u("update:modelValue",r),u("input",r),u("change",r,a),(t=i==null?void 0:i.validate)==null||t.call(i,"change").catch(v=>K()),l.currentValue=r)},j=n=>l.userInput=n,J=n=>{const t=n!==""?Number(n):"";(c(t)&&!Number.isNaN(t)||n==="")&&k(t),l.userInput=null},L=()=>{var n,t;(t=(n=m.value)==null?void 0:n.focus)==null||t.call(n)},W=()=>{var n,t;(t=(n=m.value)==null?void 0:n.blur)==null||t.call(n)},Z=n=>{u("focus",n)},q=n=>{var t;u("blur",n),(t=i==null?void 0:i.validate)==null||t.call(i,"blur").catch(a=>K())};return me(()=>e.modelValue,n=>{const t=M(n,!0);l.currentValue=t,l.userInput=null},{immediate:!0}),be(()=>{var n;const t=(n=m.value)==null?void 0:n.input;if(t.setAttribute("role","spinbutton"),Number.isFinite(e.max)?t.setAttribute("aria-valuemax",String(e.max)):t.removeAttribute("aria-valuemax"),Number.isFinite(e.min)?t.setAttribute("aria-valuemin",String(e.min)):t.removeAttribute("aria-valuemin"),t.setAttribute("aria-valuenow",String(l.currentValue)),t.setAttribute("aria-disabled",String(o.value)),!c(e.modelValue)){let a=Number(e.modelValue);Number.isNaN(a)&&(a=void 0),u("update:modelValue",a)}}),pe(()=>{var n;const t=(n=m.value)==null?void 0:n.input;t==null||t.setAttribute("aria-valuenow",l.currentValue)}),{t:P,input:m,displayValue:f,handleInput:j,handleInputChange:J,controlsAtRight:A,decrease:Y,increase:G,inputNumberSize:D,inputNumberDisabled:o,maxDisabled:p,minDisabled:V,focus:L,blur:W,handleFocus:Z,handleBlur:q,ns:y}}}),Ie=["aria-label"],ye=["aria-label"];function Se(e,u,m,l,P,i){const y=b("arrow-down"),V=b("minus"),p=b("el-icon"),S=b("arrow-up"),A=b("plus"),D=b("el-input"),o=ve("repeat-click");return d(),F("div",{class:C([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:u[2]||(u[2]=B(()=>{},["prevent"]))},[e.controls?T((d(),F("span",{key:0,role:"button","aria-label":e.t("el.inputNumber.decrease"),class:C([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:u[0]||(u[0]=w((...f)=>e.decrease&&e.decrease(...f),["enter"]))},[E(p,null,{default:U(()=>[e.controlsAtRight?(d(),I(y,{key:0})):(d(),I(V,{key:1}))]),_:1})],42,Ie)),[[o,e.decrease]]):O("v-if",!0),e.controls?T((d(),F("span",{key:1,role:"button","aria-label":e.t("el.inputNumber.increase"),class:C([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:u[1]||(u[1]=w((...f)=>e.increase&&e.increase(...f),["enter"]))},[E(p,null,{default:U(()=>[e.controlsAtRight?(d(),I(S,{key:0})):(d(),I(A,{key:1}))]),_:1})],42,ye)),[[o,e.increase]]):O("v-if",!0),E(D,{id:e.id,ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[w(B(e.increase,["prevent"]),["up"]),w(B(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var Ae=fe(we,[["render",Se],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Fe=Ne(Ae);export{Fe as E};
