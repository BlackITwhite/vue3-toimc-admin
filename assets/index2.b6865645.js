var de=Object.defineProperty,fe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var P=(n,u,s)=>u in n?de(n,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[u]=s,z=(n,u)=>{for(var s in u||(u={}))me.call(u,s)&&P(n,s,u[s]);if(O)for(var s of O(u))pe.call(u,s)&&P(n,s,u[s]);return n},L=(n,u)=>fe(n,ve(u));import{a0 as he,a1 as I,al as $,bI as V,bJ as W,bK as ye,aQ as be,aD as y,e as Ve,am as R,aT as xe,aU as we,aV as Ce,A as ge,b6 as Se,g as T,B as c,bj as U,bL as q,K as Ie,o as v,c as x,I as Te,H as _e,D as h,bc as t,b as Ee,w as G,j as _,F as J,G as E,V as Q,v as X,t as De,C as He,a7 as w,bv as Y,ao as Me}from"./index.2c91c03b.js";const ke=he({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:I([Array,Object]),default:()=>$(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:I([Array,Object]),default:()=>[V,V,V]},voidIcon:{type:W,default:()=>ye},disabledVoidIcon:{type:W,default:()=>V},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:""},texts:{type:I(Array),default:()=>$(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:be},label:{type:String,default:void 0}}),Be={change:n=>typeof n=="number",[y]:n=>typeof n=="number"},Ne=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Ae=["onMousemove","onClick"],je={name:"ElRate"},Fe=Ve(L(z({},je),{props:ke,emits:Be,setup(n,{expose:u,emit:s}){const e=n;function C(a,l){const o=f=>q(f),S=Object.keys(l).map(f=>+f).filter(f=>{const b=l[f];return(o(b)?b.excluded:!1)?a<f:a<=f}).sort((f,b)=>f-b),p=l[S[0]];return o(p)&&p.value||p}const D=R(xe,void 0),H=R(we,void 0),Z=Ce(),i=ge("rate"),{inputId:ee,isLabeledByFormItem:M}=Se(e,{formItemContext:H}),r=T(e.modelValue),g=T(-1),m=T(!0),ae=c(()=>[i.b(),i.m(Z.value)]),d=c(()=>e.disabled||(D==null?void 0:D.disabled)),le=c(()=>i.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":N.value})),k=c(()=>{let a="";return e.showScore?a=e.scoreTemplate.replace(/\{\s*value\s*\}/,d.value?`${e.modelValue}`:`${r.value}`):e.showText&&(a=e.texts[Math.ceil(r.value)-1]),a}),B=c(()=>e.modelValue*100-Math.floor(e.modelValue)*100),oe=c(()=>U(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),N=c(()=>{const a=C(r.value,oe.value);return q(a)?"":a}),te=c(()=>{let a="";return d.value?a=`${B.value}%`:e.allowHalf&&(a="50%"),{color:N.value,width:a}}),A=c(()=>U(e.icons)?{[e.lowThreshold]:e.icons[0],[e.highThreshold]:{value:e.icons[1],excluded:!0},[e.max]:e.icons[2]}:e.icons),se=c(()=>C(e.modelValue,A.value)),re=c(()=>d.value?e.disabledVoidIcon:e.voidIcon),ne=c(()=>C(r.value,A.value)),ue=c(()=>{const a=Array.from({length:e.max}),l=r.value;return a.fill(ne.value,0,l),a.fill(re.value,l,e.max),a});function j(a){const l=d.value&&B.value>0&&a-1<e.modelValue&&a>e.modelValue,o=e.allowHalf&&m.value&&a-.5<=r.value&&a>r.value;return l||o}function ie(a){d.value||(e.allowHalf&&m.value?(s(y,r.value),e.modelValue!==r.value&&s("change",r.value)):(s(y,a),e.modelValue!==a&&s("change",a)))}function ce(a){if(d.value)return;let l=r.value;const o=a.code;return o===w.up||o===w.right?(e.allowHalf?l+=.5:l+=1,a.stopPropagation(),a.preventDefault()):(o===w.left||o===w.down)&&(e.allowHalf?l-=.5:l-=1,a.stopPropagation(),a.preventDefault()),l=l<0?0:l,l=l>e.max?e.max:l,s(y,l),s("change",l),l}function F(a,l){if(!d.value){if(e.allowHalf){let o=l.target;Y(o,i.e("item"))&&(o=o.querySelector(`.${i.e("icon")}`)),(o.clientWidth===0||Y(o,i.e("decimal")))&&(o=o.parentNode),m.value=l.offsetX*2<=o.clientWidth,r.value=m.value?a-.5:a}else r.value=a;g.value=a}}function K(){d.value||(e.allowHalf&&(m.value=e.modelValue!==Math.floor(e.modelValue)),r.value=e.modelValue,g.value=-1)}return Ie(()=>e.modelValue,a=>{r.value=a,m.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||s(y,0),u({setCurrentValue:F,resetCurrentValue:K}),(a,l)=>(v(),x("div",{id:t(ee),class:h([t(ae),t(i).is("disabled",t(d))]),role:"slider","aria-label":t(M)?void 0:a.label||"rating","aria-labelledby":t(M)?t(H).labelId:void 0,"aria-valuenow":r.value,"aria-valuetext":t(k)||void 0,"aria-valuemin":"0","aria-valuemax":a.max,tabindex:"0",style:Q(t(le)),onKeydown:ce},[(v(!0),x(Te,null,_e(a.max,(o,S)=>(v(),x("span",{key:S,class:h(t(i).e("item")),onMousemove:p=>F(o,p),onMouseleave:K,onClick:p=>ie(o)},[Ee(t(X),{class:h([t(i).e("icon"),{hover:g.value===o},t(i).is("active",o<=r.value)])},{default:G(()=>[j(o)?E("v-if",!0):(v(),_(J(t(ue)[o-1]),{key:0})),j(o)?(v(),_(t(X),{key:1,style:Q(t(te)),class:h([t(i).e("icon"),t(i).e("decimal")])},{default:G(()=>[(v(),_(J(t(se))))]),_:1},8,["style","class"])):E("v-if",!0)]),_:2},1032,["class"])],42,Ae))),128)),a.showText||a.showScore?(v(),x("span",{key:0,class:h(t(i).e("text"))},De(t(k)),3)):E("v-if",!0)],46,Ne))}}));var Ke=He(Fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const Le=Me(Ke);export{Le as E};
