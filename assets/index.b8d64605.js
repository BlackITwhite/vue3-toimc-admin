import{X as J,n as Q,bm as d,e as Z,L as _,m as x,bf as ee,aw as ne,bn as te,bo as ae,f as ue,W as se,bp as re,u as le,v as f,ad as v,aE as oe,b8 as ie,D as de,am as ce,bq as me,x as be,aF as $,r as p,aM as pe,o as i,c as E,aN as K,y as F,aO as g,b as P,w as T,g as y,A as U,a6 as C,a1 as fe}from"./index.da4c6fdc.js";import{R as ve}from"./index.653cb596.js";const Ne=J({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:Q},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),Ve={change:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>d(e),"update:modelValue":e=>d(e)||e===void 0},he=Z({name:"ElInputNumber",components:{ElInput:_,ElIcon:x,ArrowUp:ee,ArrowDown:ne,Plus:te,Minus:ae},directives:{RepeatClick:ve},props:Ne,emits:Ve,setup(e,{emit:a}){const c=ue(),u=se({currentValue:e.modelValue,userInput:null}),{formItem:o}=re(),B=le("input-number"),N=f(()=>I(e.modelValue,-1)<e.min),V=f(()=>I(e.modelValue)>e.max),h=f(()=>{const n=z(e.step);return v(e.precision)?Math.max(z(e.modelValue),n):(n>e.precision,e.precision)}),S=f(()=>e.controls&&e.controlsPosition==="right"),k=oe(),m=ie(),w=f(()=>{if(u.userInput!==null)return u.userInput;let n=u.currentValue;if(d(n)){if(Number.isNaN(n))return"";v(e.precision)||(n=n.toFixed(e.precision))}return n}),b=(n,t)=>(v(t)&&(t=h.value),Number.parseFloat(`${Math.round(n*10**t)/10**t}`)),z=n=>{if(v(n))return 0;const t=n.toString(),s=t.indexOf(".");let r=0;return s!==-1&&(r=t.length-s-1),r},I=(n,t=1)=>d(n)?(n=d(n)?n:Number.NaN,b(n+e.step*t)):u.currentValue,O=()=>{if(m.value||V.value)return;const n=e.modelValue||0,t=I(n);A(t)},W=()=>{if(m.value||N.value)return;const n=e.modelValue||0,t=I(n,-1);A(t)},M=(n,t)=>{const{max:s,min:r,step:D,precision:R,stepStrictly:H}=e;let l=Number(n);return n===null&&(l=Number.NaN),Number.isNaN(l)||(H&&(l=Math.round(l/D)*D),v(R)||(l=b(l,R)),(l>s||l<r)&&(l=l>s?s:r,t&&a("update:modelValue",l))),l},A=n=>{var t;const s=u.currentValue;let r=M(n);s!==r&&(Number.isNaN(r)&&(r=void 0),u.userInput=null,a("update:modelValue",r),a("input",r),a("change",r,s),(t=o==null?void 0:o.validate)==null||t.call(o,"change").catch(D=>$()),u.currentValue=r)},Y=n=>u.userInput=n,q=n=>{const t=n!==""?Number(n):"";(d(t)&&!Number.isNaN(t)||n==="")&&A(t),u.userInput=null},G=()=>{var n,t;(t=(n=c.value)==null?void 0:n.focus)==null||t.call(n)},L=()=>{var n,t;(t=(n=c.value)==null?void 0:n.blur)==null||t.call(n)},X=n=>{a("focus",n)},j=n=>{var t;a("blur",n),(t=o==null?void 0:o.validate)==null||t.call(o,"blur").catch(s=>$())};return de(()=>e.modelValue,n=>{const t=M(n,!0);u.currentValue=t,u.userInput=null},{immediate:!0}),ce(()=>{var n;const t=(n=c.value)==null?void 0:n.input;if(t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",String(e.max)),t.setAttribute("aria-valuemin",String(e.min)),t.setAttribute("aria-valuenow",String(u.currentValue)),t.setAttribute("aria-disabled",String(m.value)),!d(e.modelValue)){let s=Number(e.modelValue);Number.isNaN(s)&&(s=void 0),a("update:modelValue",s)}}),me(()=>{var n;const t=(n=c.value)==null?void 0:n.input;t==null||t.setAttribute("aria-valuenow",u.currentValue)}),{input:c,displayValue:w,handleInput:Y,handleInputChange:q,controlsAtRight:S,decrease:W,increase:O,inputNumberSize:k,inputNumberDisabled:m,maxDisabled:V,minDisabled:N,focus:G,blur:L,handleFocus:X,handleBlur:j,ns:B}}});function we(e,a,c,u,o,B){const N=p("arrow-down"),V=p("minus"),h=p("el-icon"),S=p("arrow-up"),k=p("plus"),m=p("el-input"),w=pe("repeat-click");return i(),E("div",{class:F([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:a[2]||(a[2]=C(()=>{},["prevent"]))},[e.controls?K((i(),E("span",{key:0,role:"button",class:F([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:a[0]||(a[0]=g((...b)=>e.decrease&&e.decrease(...b),["enter"]))},[P(h,null,{default:T(()=>[e.controlsAtRight?(i(),y(N,{key:0})):(i(),y(V,{key:1}))]),_:1})],34)),[[w,e.decrease]]):U("v-if",!0),e.controls?K((i(),E("span",{key:1,role:"button",class:F([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:a[1]||(a[1]=g((...b)=>e.increase&&e.increase(...b),["enter"]))},[P(h,null,{default:T(()=>[e.controlsAtRight?(i(),y(S,{key:0})):(i(),y(k,{key:1}))]),_:1})],34)),[[w,e.increase]]):U("v-if",!0),P(m,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[g(C(e.increase,["prevent"]),["up"]),g(C(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var Ie=be(he,[["render",we],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Se=fe(Ie);export{Se as E};
